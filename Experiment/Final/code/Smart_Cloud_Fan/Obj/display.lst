C51 COMPILER V9.02   DISPLAY                                                               12/19/2022 09:56:56 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE DISPLAY
OBJECT MODULE PLACED IN ..\Obj\display.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE ..\Api\display.c BROWSE INCDIR(..\Api;..\Public;..\User) DEBUG OBJECTEXTEND
                    - PRINT(..\Obj\display.lst) OBJECT(..\Obj\display.obj)

line level    source

   1          #include "display.h"
   2          
   3          /*******************************
   4          digital display the module value in ch[8]
   5          *******************************/
   6          bit flag_digital_display = 0;   
   7          bit flag_blink_8ms = 0;                          
   8          void digital_display(unsigned char *ch)
   9          {
  10   1              static unsigned char i=0;
  11   1              static bit j=0;
  12   1              static unsigned char cnt=0;
  13   1      
  14   1              if (flag_digital_display==1)
  15   1              {
  16   2                      flag_digital_display = 0;
  17   2                      i++;
  18   2                      if (i==8) i=0;
  19   2                      SMG_PORT = 0x00;  // 消音
  20   2              }
  21   1      
  22   1              if (flag_blink_8ms == 1)// 闪烁
  23   1              {
  24   2                      flag_blink_8ms = 0;
  25   2                      cnt++;
  26   2                      if (cnt==30)  // 0.24s
  27   2                      {
  28   3                              cnt = 0;
  29   3                              j = ~j;
  30   3                      }
  31   2              }       
  32   1              if (j == 1)  // j为1时，跳过该位的显示，即不显示，实现闪烁
  33   1              {
  34   2                      if (timer_mode == 1){
  35   3                              if (i==2 || i==3) i = 4;
  36   3                      } else if (timer_mode == 2){
  37   3                              if (i==0 || i==1) i = 2;
  38   3                      }
  39   2              }
  40   1      
  41   1      
  42   1              switch(i)  // 位选和段选
  43   1              {
  44   2                      case 0: LSC=1;LSB=1;LSA=1; SMG_PORT = *(ch+0); break;
  45   2                      case 1: LSC=1;LSB=1;LSA=0; SMG_PORT = *(ch+1); break;
  46   2                      case 2: LSC=1;LSB=0;LSA=1; SMG_PORT = *(ch+2); break;
  47   2                      case 3: LSC=1;LSB=0;LSA=0; SMG_PORT = *(ch+3); break;
  48   2                      case 4: LSC=0;LSB=1;LSA=1; SMG_PORT = *(ch+4); break;
  49   2                      case 5: LSC=0;LSB=1;LSA=0; SMG_PORT = *(ch+5); break;
  50   2                      case 6: LSC=0;LSB=0;LSA=1; SMG_PORT = *(ch+6); break;
  51   2                      case 7: LSC=0;LSB=0;LSA=0; SMG_PORT = *(ch+7); break;
  52   2              }
  53   1      }

C51 COMPILER V9.02   DISPLAY                                                               12/19/2022 09:56:56 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    205    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      3    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
