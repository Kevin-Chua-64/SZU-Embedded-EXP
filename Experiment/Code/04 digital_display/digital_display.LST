C51 COMPILER V9.02   DIGITAL_DISPLAY                                                       10/24/2022 19:33:19 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE DIGITAL_DISPLAY
OBJECT MODULE PLACED IN digital_display.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE digital_display.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>
   2          unsigned char code led_num[16] = {0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d, 0x7d, 0x07, 0x7f, 0x6f, 0x77, 0x7c, 
             -0x39, 0x5e, 0x79, 0x71};
   3          bit flag = 0;
   4          sbit LSA=P2^2;
   5          sbit LSB=P2^3;
   6          sbit LSC=P2^4;
   7          
   8          void timer0_config()  //11.0592MHz
   9          {
  10   1              TMOD &= 0xf0;
  11   1              TMOD |= 0x01;  // 计数器0工作在模式1
  12   1              TR0 = 1;  // 计数器0工作
  13   1              TH0 = 0xf8;   
  14   1              TL0 = 0xcd;  // 2ms
  15   1      }
  16                                                   
  17          void display()
  18          {
  19   1              static unsigned char i=0;
  20   1      
  21   1              switch(i)  // 位选和段选
  22   1              {
  23   2                      case 0: LSC=1;LSB=1;LSA=1;P0 = led_num[0]; break;
  24   2                      case 1: LSC=1;LSB=1;LSA=0;P0 = led_num[1]; break;
  25   2                      case 2: LSC=1;LSB=0;LSA=1;P0 = led_num[2]; break;
  26   2                      case 3: LSC=1;LSB=0;LSA=0;P0 = led_num[3]; break;
  27   2                      case 4: LSC=0;LSB=1;LSA=1;P0 = led_num[4]; break;
  28   2                      case 5: LSC=0;LSB=1;LSA=0;P0 = led_num[5]; break;
  29   2                      case 6: LSC=0;LSB=0;LSA=1;P0 = led_num[6]; break;
  30   2                      case 7: LSC=0;LSB=0;LSA=0;P0 = led_num[7]; break;
  31   2              }
  32   1      
  33   1              if (flag==1)
  34   1              {
  35   2                      P0=0x00;  // 消音
  36   2                      i++;
  37   2                      if (i==8) i=0;
  38   2                      flag = 0;
  39   2              }
  40   1      }
  41          
  42          void main()
  43          {       
  44   1              EA = 1; // 中断总开关
  45   1              ET0 = 1;  // 定时器0中断分开关
  46   1              timer0_config();
  47   1              while(1)
  48   1              {
  49   2                      display();
  50   2              }               
  51   1      }
  52          
  53          void timer0_2ms() interrupt 1
  54          {
C51 COMPILER V9.02   DIGITAL_DISPLAY                                                       10/24/2022 19:33:19 PAGE 2   

  55   1              TH0 = 0xf8;   
  56   1              TL0 = 0xcd;  // 2ms
  57   1              flag = 1;
  58   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    183    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
